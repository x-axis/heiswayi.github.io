<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" class="no-js" itemscope itemtype="http://schema.org/WebPage"><link href="http://gmpg.org/xfn/11" rel="profile"><meta charset="UTF-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title> Calculating Value-at-Risk using Extreme Value Theory · Keenan&#39;s Log</title><meta name="description" content=" Producing a one-day value-at-risk of log returns for the S&amp;P 500 Index. "/><meta name="keywords" content=""><meta name="author" content="Keenan Gao"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta property="og:type" content="article"><meta property="article:author" content="Keenan Gao"><meta property="article:section" content=""><meta property="article:tag" content=""><meta property="article:published_time" content="2016-10-19 00:00:00 -0500"><meta property="og:url" content="https://x-axis.github.io/2016/sp500-extreme-value-theory"><meta property="og:title" content=" Calculating Value-at-Risk using Extreme Value Theory · Keenan&#39;s Log "><meta property="og:image" content="https://x-axis.github.io"><meta property="og:description" content=" Producing a one-day value-at-risk of log returns for the S&amp;P 500 Index. "><meta property="og:site_name" content="Keenan Gao"><meta property="og:locale" content="en_US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@keenangao"><meta name="twitter:title" content=" Calculating Value-at-Risk using Extreme Value Theory · Keenan&#39;s Log "><meta name="twitter:description" content=" Producing a one-day value-at-risk of log returns for the S&amp;P 500 Index. "><meta name="twitter:image:src" content="https://x-axis.github.io"><meta itemprop="name" content=" Calculating Value-at-Risk using Extreme Value Theory · Keenan&#39;s Log "><meta itemprop="description" content=" Producing a one-day value-at-risk of log returns for the S&amp;P 500 Index. "><meta itemprop="image" content="https://x-axis.github.io"><link rel="canonical" href="https://x-axis.github.io/2016/sp500-extreme-value-theory"><link rel="alternate" type="application/rss+xml" title="RSS" href="https://x-axis.github.io/feed.xml"><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="/assets/css/font-awesome.min.css"> <script src="/assets/js/modernizr.custom.js"></script> <!--[if lt IE 9]> <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script> <script src="/assets/js/rem.min.js"></script> <![endif]--> <a href="#content" class="skip">Skip to content</a><div class="wrap"><div class="masthead"><div class="container"><h2 class="masthead-title"> <a href="https://x-axis.github.io" title="Keenan's Personal Log" class="title">keenan's log <span class="dot-red">•</span><span class="dot-yellow">•</span><span class="dot-green">•</span></a> <small>Recording things so that I don't forget them. <i class="fa fa-rocket" aria-label="coffee" title="Make now the most precious time. Now will never come again."></i> </small></h2><div class="footer-social-links"> <a href="http://x-axis.github.io/feed.xml" title="RSS Feed" target="_blank"><i class="fa fa-rss"></i></a> <a href="https://my.linkedin.com/in/keenangao" title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a> <a href="http://x-axis.github.io/my-repos/" title="GitHub Repositories" target="_blank"><i class="fa fa-github-alt"></i></a> <a href="http://x-axis.github.io/my-gists/" title="GitHub Gists" target="_blank"><i class="fa fa-code"></i></a> <a href="https://www.flickr.com/photos/125365844@N02/" title="Flickr" target="_blank"><i class="fa fa-flickr"></i></a></div><div class="nav"><ul class="top-menu"><li><a href="/" title="Homepage"><i class="fa fa-home"></i></a><li><a href="/about">About</a><li><a href="/tagged#poetry">Poetry</a><li><a href="http://www.keenan.ml">Photography</a><li><a href="/reminder">Reminder</a><li><a href="/tagged">Tags</a></ul></div></div></div><div id="content" class="container content"> <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><div class="post"><div class="post-top-meta"><div class="post-date">October 19, 2016 &middot; <span class="reading-time" title="Estimated Reading Time"> 3 minutes read </span></div><h1 class="post-title">Calculating Value-at-Risk using Extreme Value Theory</h1></div><h1 id="introduction">Introduction</h1><p>Prior to Robert Engle’s introduction of ARCH processes in 1982, little methodology existed for modeling the variance of financial returns. At the time, conventional time series models tended to assume constant variance which fell short in capturing the dynamics of financial markets. The ARCH model developed by Engle offered a method of forecasting variance, by weighting a fixed number of previous observations. In 1986, Tim Bollerslev generalized this approach with the GARCH model, which assigned declining weights to all observations and let very old weights approach zero.<p>These initial models have proved to be simple and robust, but receive criticism for failing to consider the direction of returns. ARCH/GARCH treat negative returns and positive returns symmetrically, but both economic theory and historical trends suggest that volatility responds asymmetrically to market information. In particular, financial markets exhibit a <em>leverage effect</em>, where losses impact volatility more than gains. This asymmetric response naturally leads to an asymmetry in distribution, where the distribution of losses exhibit heavier tails than the distribution of gains.<p>Drawing on results from Extreme Value Theory, we model daily log returns for the S&amp;P 500 Index over ten years and produce a one-day value-at-risk for the next trading day. The 2% left tail is fit by a Generalized Pareto distribution using maximum likelihood estimation, representing the distribution of the fifty worst returns over ten years. To ensure stable parameter estimates for the Generalized Pareto, we fit on the returns after adjusting for volatility, by “degarching” the time series using a leveraged GARCH model. This adjustment accounts for the market tendency to display higher volatility in response to negative shocks, resulting in a more accurate portrayal of value-at-risk than the traditional GARCH model.<h1 id="setup">Setup</h1><p>The dataset consists of daily adjusted closing prices for the S&amp;P 500 Index from Thursday November 2, 2006 to Friday October 7th, 2016, with 2,501 days in total. In order to make meaningful comparisons across time by using an invariant quantity, the time series was converted into log returns. The final dataset consisted of 2,500 daily log returns. Data was sourced from Yahoo Finance under the ^GSPC ticker.<p>Analysis and results were produced in MATLAB.<h1 id="gjr-garch11-model">GJR-GARCH(1,1) Model</h1><p>In 1993, Glosten, Jagannathan, and Runkle addressed the early ARCH/GARCH criticisms with the GJR-GARCH model, in which asymmetric response weight was differentiated for positive and negative shocks.<p>For a time series of returns <script type="math/tex">\{r_i\}_{i=1}^n</script>, a drift process <script type="math/tex">\{\mu_t\}</script>, and residuals <script type="math/tex">\varepsilon_i = r_i - \mu_i</script>, the “leveraged” GARCH model can be parameterized as: <script type="math/tex; mode=display">\begin{equation} \sigma^2_t = \alpha_0 + \alpha_1(\varepsilon_{t-1} + \delta|\varepsilon_{t-1}|)^2 + \beta_1\sigma^2_{t-1} \end{equation}</script><p>with <script type="math/tex">% <![CDATA[ \delta^2 < 1 %]]></script>. An additional constraint is required for the existence of unconditional variance, given by <script type="math/tex">% <![CDATA[ \alpha_1(1+\delta^2) + \beta_1 < 1 %]]></script>.<p>The quasi-log likelihood is: <script type="math/tex; mode=display">\begin{equation} \log \ell_{\theta | \sigma_i} = \frac{1}{2}\sum_{i=1}^n \left[ \left(\frac{\varepsilon_i}{\sigma_i}\right)^2 + \log(2\pi\sigma_i^2)\right] \end{equation}</script><p>where <script type="math/tex">\theta</script> represents the vector of parameters to be simultaneously estimated and <script type="math/tex">\sigma_i^2</script> is specified by Equation (1).<p>Due to the extremely short time horizon of one day, we can reasonably assume that daily returns have zero drift. Historically, daily equity returns have shown zero or nearly zero drift. Therefore, the residuals used to outfit the quasi-log likelihood are simply the log returns as specified in the Setup section.<p>A grid of initial seeds was created with initial values of <script type="math/tex">\alpha_0</script> and <script type="math/tex">\alpha_1</script> fixed at 0.1 and 0.01, varying negatively for <script type="math/tex">\delta</script>, and varying positively for <script type="math/tex">\beta_1</script>. The negative quasi-likelihood was minimized for all seeds to find the estimates producing the smallest negative log likelihood. The results are shown in Table I.<div class="tagged"> <a href="https://x-axis.github.io/tagged#math"><i class="fa fa-hashtag muted" aria-hidden="true"></i>math</a> <a href="https://x-axis.github.io/tagged#statistics"><i class="fa fa-hashtag muted" aria-hidden="true"></i>statistics</a> <a href="https://x-axis.github.io/tagged#writeups"><i class="fa fa-hashtag muted" aria-hidden="true"></i>writeups</a></div></div></div></div><div class="footer"><div class="copyright">Handmade with <span style="color:#e00"><i class="fa fa-heart-o"></i></span> using <a href="http://jekyllrb.com">Jekyll</a> &middot; <i class="fa fa-code"></i> on <a href="https://github.com/heiswayi/heiswayi.github.io">GitHub</a> <i class="fa fa-github-alt"></i><br><i class="fa fa-copyright"></i> 2015 - 2017 Keenan Gao</div></div><script> (function() { var pre = document.getElementsByTagName('pre'), pl = pre.length; for (var i = 0; i < pl; i++) { pre[i].innerHTML = '<span class="line-number"></span>' + pre[i].innerHTML + '<span class="cl"></span>'; var num = pre[i].innerHTML.split(/\n/).length; for (var j = 0; j < (num - 1); j++) { var line_num = pre[i].getElementsByTagName('span')[0]; line_num.innerHTML += '<span>' + (j + 1) + '</span>'; } } })(); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-58296043-7', 'auto'); ga('send', 'pageview'); </script>
