<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" class="no-js" itemscope itemtype="http://schema.org/WebPage"><link href="http://gmpg.org/xfn/11" rel="profile"><meta charset="UTF-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title> Compiling Python Code in Vim · Keenan&#39;s Log</title><meta name="description" content=" Personal notes on my vim configuration. "/><meta name="keywords" content=""><meta name="author" content="Keenan Gao"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta property="og:type" content="article"><meta property="article:author" content="Keenan Gao"><meta property="article:section" content=""><meta property="article:tag" content=""><meta property="article:published_time" content="2016-07-19 00:00:00 -0500"><meta property="og:url" content="https://x-axis.github.io/2016/compiling-python-code-in-vim"><meta property="og:title" content=" Compiling Python Code in Vim · Keenan&#39;s Log "><meta property="og:image" content="https://x-axis.github.io"><meta property="og:description" content=" Personal notes on my vim configuration. "><meta property="og:site_name" content="Keenan Gao"><meta property="og:locale" content="en_US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@keenangao"><meta name="twitter:title" content=" Compiling Python Code in Vim · Keenan&#39;s Log "><meta name="twitter:description" content=" Personal notes on my vim configuration. "><meta name="twitter:image:src" content="https://x-axis.github.io"><meta itemprop="name" content=" Compiling Python Code in Vim · Keenan&#39;s Log "><meta itemprop="description" content=" Personal notes on my vim configuration. "><meta itemprop="image" content="https://x-axis.github.io"><link rel="canonical" href="https://x-axis.github.io/2016/compiling-python-code-in-vim"><link rel="alternate" type="application/rss+xml" title="RSS" href="https://x-axis.github.io/feed.xml"><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="/assets/css/font-awesome.min.css"> <script src="/assets/js/modernizr.custom.js"></script> <!--[if lt IE 9]> <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script> <script src="/assets/js/rem.min.js"></script> <![endif]--> <a href="#content" class="skip">Skip to content</a><div class="wrap"><div class="masthead"><div class="container"><h2 class="masthead-title"> <a href="https://x-axis.github.io" title="Keenan's Personal Log" class="title">keenan's log <span class="dot-red">•</span><span class="dot-yellow">•</span><span class="dot-green">•</span></a> <small>Recording things so that I don't forget them. <i class="fa fa-rocket" aria-label="coffee" title="Make now the most precious time. Now will never come again."></i> </small></h2><div class="footer-social-links"> <a href="http://x-axis.github.io/feed.xml" title="RSS Feed" target="_blank"><i class="fa fa-rss"></i></a> <a href="https://my.linkedin.com/in/keenangao" title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a> <a href="http://x-axis.github.io/my-repos/" title="GitHub Repositories" target="_blank"><i class="fa fa-github-alt"></i></a> <a href="http://x-axis.github.io/my-gists/" title="GitHub Gists" target="_blank"><i class="fa fa-code"></i></a> <a href="https://www.flickr.com/photos/125365844@N02/" title="Flickr" target="_blank"><i class="fa fa-flickr"></i></a></div><div class="nav"><ul class="top-menu"><li><a href="/" title="Homepage"><i class="fa fa-home"></i></a><li><a href="/about">About</a><li><a href="/tagged#poetry">Poetry</a><li><a href="http://www.keenan.ml">Photography</a><li><a href="/reminder">Reminder</a><li><a href="/tagged">Tags</a></ul></div></div></div><div id="content" class="container content"> <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><div class="post"><div class="post-top-meta"><div class="post-date">July 19, 2016 &middot; <span class="reading-time" title="Estimated Reading Time"> 1 minute read </span></div><h1 class="post-title">Compiling Python Code in Vim</h1></div><p>At the beginning of the summer, I configured my vim environment for Python development, including being able to compile my code within the editor. Today, I pulled up some old files and couldn’t remember how to run it anymore…<p>I looked in my vimrc file and it looks like this:<div class="language-vim highlighter-rouge"><pre class="highlight"><code><span class="c">" Set makeprg to compile current Python file</span>
<span class="k">set</span> makprg<span class="p">=</span>python\ %
<span class="k">set</span> noswapfile

<span class="c">" Map keys to compile Python scripts</span>
<span class="p">:</span>nnoremap <span class="p">&lt;</span>S<span class="p">-</span><span class="k">b</span><span class="p">&gt;</span> <span class="p">:</span>b1 <span class="p">&lt;</span>bar<span class="p">&gt;</span> <span class="p">:</span><span class="k">w</span> <span class="p">&lt;</span>bar<span class="p">&gt;</span> <span class="p">:</span><span class="m">1</span><span class="p">,</span><span class="m">1000</span><span class="k">bd</span><span class="p">!</span> <span class="p">&lt;</span>bar<span class="p">&gt;</span> 
<span class="p">:</span>b1 <span class="p">&lt;</span>bar<span class="p">&gt;</span> <span class="p">:</span><span class="k">botright</span> <span class="k">vnew</span> <span class="p">&lt;</span>bar<span class="p">&gt;</span> 
<span class="p">:</span>read <span class="p">!</span>python <span class="k">lol</span><span class="p">.</span><span class="k">py</span> <span class="p">-</span><span class="k">m</span> json<span class="p">.</span>tool <span class="p">&lt;</span>CR<span class="p">&gt;</span>
</code></pre></div><p>What is this ugliness?! It looks like hitting Shift+B results in the following:<ol><li>Loads the first buffer (presumably where my code is)<li>Writes the file (saves it)<li>Closes buffers 1 through 1000 (essentially closes all buffers). I assume the exclamation forces this action without saving the other buffers.<li>Reloads the first buffer<li>Opens a new vertical buffer in the bottom right part of vim<li>Runs the shell command <code>python lol.py</code> and reads the output into a new buffer<li>Runs the Python module, json.tool<li>Hits enter</ol><p>Ignoring the fact that I apparently hardcoded a build sequence for one file, the output doesn’t look too bad. The results look like this:<p><img src="http://i.imgur.com/lv2Iw89.png" alt="Python output in vim buffer" /><div class="tagged"> <a href="https://x-axis.github.io/tagged#notes"><i class="fa fa-hashtag muted" aria-hidden="true"></i>notes</a> <a href="https://x-axis.github.io/tagged#reference"><i class="fa fa-hashtag muted" aria-hidden="true"></i>reference</a> <a href="https://x-axis.github.io/tagged#code"><i class="fa fa-hashtag muted" aria-hidden="true"></i>code</a></div></div></div></div><div class="footer"><div class="copyright">Handmade with <span style="color:#e00"><i class="fa fa-heart-o"></i></span> using <a href="http://jekyllrb.com">Jekyll</a> &middot; <i class="fa fa-code"></i> on <a href="https://github.com/heiswayi/heiswayi.github.io">GitHub</a> <i class="fa fa-github-alt"></i><br><i class="fa fa-copyright"></i> 2015 - 2017 Keenan Gao</div></div><script> (function() { var pre = document.getElementsByTagName('pre'), pl = pre.length; for (var i = 0; i < pl; i++) { pre[i].innerHTML = '<span class="line-number"></span>' + pre[i].innerHTML + '<span class="cl"></span>'; var num = pre[i].innerHTML.split(/\n/).length; for (var j = 0; j < (num - 1); j++) { var line_num = pre[i].getElementsByTagName('span')[0]; line_num.innerHTML += '<span>' + (j + 1) + '</span>'; } } })(); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-58296043-7', 'auto'); ga('send', 'pageview'); </script>
