
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" class="no-js">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Operation HEAR &middot; keenan's log.
    
  </title>

  
    <meta name="description" content="A journal of attempts to engineer a waterproof hearing solution."/>
    <meta name="keywords" content="underwater, waterproof, hearing aid, deaf">
  
  <meta name="author" content="Heiswayi Nrird">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@keenangao">
  <meta name="twitter:creator" content="@keenangao">
  
    <meta name="twitter:title" content="Operation HEAR">
    <meta name="twitter:description" content="A journal of attempts to engineer a waterproof hearing solution.">
  

  <meta property="og:type" content="website"/>
  
    <meta property="og:title" content="Operation HEAR"/>
    <meta property="og:url" content="/waterproof-hearing-aid.html"/>
    <meta property="og:description" content="A journal of attempts to engineer a waterproof hearing solution."/>
    <meta property="og:site_name" content="Operation HEAR"/>
  

  <link rel="apple-touch-icon" sizes="57x57" href="/public/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/public/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/public/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/public/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/public/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/public/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/public/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/public/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/public/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/public/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/public/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/public/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/public/icons/favicon-16x16.png">
  <link rel="manifest" href="/public/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#f3f3f3">
  <meta name="msapplication-TileImage" content="/public/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="google-site-verification" content="aSavCGGU0uSN5HEHnI7ZiMqVKxn7mfUPCGMVJvmDQ1w" />
  <meta name="wot-verification" content="6da2597a332a1fadad8f"/>

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <link rel="stylesheet" href="/public/css/normalize.css">
  <link rel="stylesheet" href="/public/css/style.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css"> 
  <script src="/public/js/modernizr.custom.js"></script>
  <script src="/public/js/jquery-1.11.2.min.js"></script>
  <script src="/public/js/masonry.pkgd.min.js"></script>
  <script type="text/javascript" async
		  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>	
  <script src="/public/js/jquery.tablesorter.js"> </script>
  <!--[if lt IE 9]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script>
    <script src="/public/js/rem.min.js"></script>
  <![endif]-->
</head>


  <body>
    <div class="wrap">
      <div class="master-nav">
        <div class="nav">
            <ul class="top-menu">
              <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
              <li><a href="/about.html"><i class="fa fa-info-circle"></i> About</a></li>
              <li><a href="/notes.html"><i class="fa fa-pencil"></i> Notes</a></li>
              <li><a class="resume" href="http://x-axis.github.io/resume/"><i class="fa fa-file-text-o"></i> Resume</a></li>
              <li><a class="special" href="https://github.com/x-axis?tab=repositories/"><i class="fa fa-github-alt"></i> Repositories</a></li>
              <li><a class="special" href="https://gist.github.com/x-axis"><i class="fa fa-code"></i> Gists</a></li>
              <li><a class="unique" href="http://keenan.ml"><i class="fa fa-camera-retro"></i> Photography</a></li>
            </ul>
        </div>
      </div>

      <div class="masthead">
        <div class="container">
          <h2 class="masthead-title">
            <a href="/" title="Home">keenan's log.</a>
            <small>Notes on things so that I don't forget them.</small>
          </h2>

          <div class="footer-social-links">
  <a href="https://my.linkedin.com/in/keenan-gan" title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a>
  <a href="https://twitter.com/keenangao" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
  <a href="https://github.com/x-axis" title="GitHub" target="_blank"><i class="fa fa-github-alt"></i></a>
  <a href="https://gist.github.com/x-axis" title="GitHub Gist" target="_blank"><i class="fa fa-code"></i></a>
  <a href="https://500px.com/keenangao" title="500px" target="_blank"><i class="fa fa-500px"></i></a>
</div>


        </div>
      </div>

      <div class="container content">
        <div class="post">
  <div class="post-top-meta">
    <div class="post-date">December 03, 2016 &middot; <span class="reading-time" title="Estimated Reading Time">
  
  
    23 minutes read
  
</span>
</div>
    <h1 class="post-title">Operation HEAR</h1>
  </div>

  <div class="hrline"></div>

  <p>Log last updated: 12/03/2016</p>

<h1 id="introduction">Introduction</h1>
<p>Since I was a kid, I’ve wished for a way to hear while in the water. As of 2016, the only waterproof hearing aid on the market is the <a href="http://www.siemens.com/press/en/pressrelease/?press=/en/pressrelease/2012/healthcare/h20121036.htm">Siemens Aquaris</a>. Someday I would like one but for now, this is my journal of trying to figure out something more cost-effective :).</p>

<h1 id="12292014">12/29/2014</h1>
<p>Got fitted with <a href="http://www.resound.com/en-US/hearing-aids/enzo2">Resound Enzo<sup>2</sup></a>. This hearing aid has actually been life-changing. As a <a href="https://developer.apple.com/programs/mfi/">Made for iPhone®</a> product, it streams sound from my phone directly into my hearing aid’s internal microphone via Bluetooth. The external microphone can also be disabled, effectively resulting in 100% noise-cancellation. For the first time, I could Skype without having to ask my friends to constantly repeat themselves because the max volume wasn’t loud enough. I looked forward to FaceTiming my family instead of anxiously wishing I could hang up.</p>

<h1 id="8052016">8/05/2016</h1>
<p>Went tubing with my friends! I had taken out my hearing aids for tubing in a lake before, but this trip was a 3-hour trip down a lazy river. We would essentially be chilling and talking the entire time. I didn’t want to be left out so I wore my old pair from high school. I figured that if something happened to them, I’d still have the ReSounds. The trip turned out to be a blast; we tied our tubes together and played music while talking.</p>

<p><img src="/images/river-tubing.jpg" alt="River tubing" />
<em>Image from Trinity River Vision Authority.</em></p>

<h1 id="8182016">8/18/2016</h1>
<p>Hatched crazy idea of using iPhone as a microphone and pairing it to waterproof Bluetooth headphones. Then I simply enclose my iPhone in a waterproof case and swim with it. I had already gotten such a case for tubing and discovered that I could still talk on the phone. That is, my phone’s internal microphone could pick up sound even in a watertight case. Of course, this idea depends on the case staying waterproof and not destroying my phone in the process.</p>

<p>Apps that can turn the iPhone into a microphone are many! Preliminary testing using my hearing aids as Bluetooth headphones revealed that the internal iPhone microphone is surprisingly good and can switch between near and far range. I turned off my hearing aid’s external microphone so that the only sound came from the iPhone’s internal microphone. I could hear my parents yelling my name from downstairs and hold a conversation with them in the car and at the dinner table.</p>

<p>Sound quality is extremely polluted. There is a lot of ambient / background noise and it is annoyingly loud. My voice also sounds disturbingly different, I can’t describe it. My parents also sound different.</p>

<p>Overall, results are optimistic and this idea looks possible.</p>

<h1 id="8192016">8/19/2016</h1>
<p>Research waterproof ratings. Apparently they are on an “IPX” scale from 0 (zero protection) to 8 (fully waterproof).</p>

<table>
  <thead>
    <tr>
      <th>Level</th>
      <th>Protection</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>6</td>
      <td>Can withstand water jets at 100 liters/min for 3 min</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Immersion up to 1 meter for 30 minutes</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Continuous immersion up to 3 meters</td>
    </tr>
  </tbody>
</table>

<p>Ordered a pair of <a href="https://www.amazon.com/gp/product/B01G8JO5F2/">IPX7 Bluetooth earbuds</a>.</p>

<h1 id="8222016">8/22/2016</h1>

<p>Bluetooth headphones arrive. Comfortable and tightly snug in ear.</p>

<p>The range is fine, I can hear a “noise” when my parents are yelling my name from downstairs but the sound quality… beyond salvageable. It sharply degrades with distance, with speech intelligibility at 3 feet, but unintelligible beyond 1 meter. It is difficult to discern changes in pitch and tone. These results are puzzling considering how well this worked when I paired my hearing aid.</p>

<p>Further investigation shows that the iPhone is automatically using the microphone in my Bluetooth headphones instead of its own internal microphone. This seems to be the default behavior; there is no existing method to choose which microphone my phone uses. I tried several <a href="http://petralex.pro/en/article/view?id=1">hearing algorithms</a>: Petralax, NAL, Berger, and POGO. I generally prefer POGO, but in all cases the algorithms failed epically.</p>

<p>Exhaustive search for all IPX6, IPX7, and IPX8 wireless headphones without a built-in microphone. There are none.</p>

<p>Since trials with my hearing aid worked well, I think this should still work if I can force my phone to use its internal microphone. To be sure, I’ll repeat tests using wired earbuds.</p>

<h1 id="8232016">8/23/2016</h1>

<p>I borrowed my dad’s Apple earbuds.</p>

<p>Results were even better than expected! As predicted, my iPhone used its internal microphone to pick up audio and routed it through my earbuds. The sound quality was the pleasant surprise. In tests with my hearing aid, I had complained about how annoying the background noise was. Here, there was no background noise simply by virtue of the fact that I couldn’t hear it. My hearing aid is an amplifier that boosts all sound, but normal wired earbuds don’t have such a thing. The only volume control would come from the iPhone, and it turned out that the only sounds I could hear were those considerably above background noise, i.e. loud spoken audio.</p>

<p>My thoughts were confirmed by this test: I just need to figure out a way to remove the microphone profile from my Bluetooth headphones. That, or find waterproof wired earbuds which might be an easier task. The best wired waterproof earbuds I found (sorted by Amazon rating) are:</p>

<table id="EarbudsTable" class="tablesorter">
<thead>
	<tr>
		<th>Product</th>
		<th>IPX</th>
		<th>Price</th>
		<th>Rating</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><a href="https://www.amazon.com/Travelon-Waterproof-Headphones-White-Yellow/dp/B00CBT9K0Y/">Travelon Headphones</a></td>
		<td>8</td>
		<td>$13.17</td>
		<td>4.0</td>
	</tr>

	<tr>
		<td><a href="https://www.amazon.com/Baakyeek-Waterproof-Underwater-Swimming-Headphone/dp/B00IIEHZDK/">Baakyeek Headphones</a></td>
		<td>8</td>
		<td>$4.59</td>
		<td>4.3</td>
	</tr>

	<tr>
		<td><a href="https://www.amazon.com/Black-Swimbuds-100%25-Waterproof-Headphones/dp/B01BTFHYIU/">Swimbuds Black</a></td>
		<td>8</td>
		<td>$40.00</td>
		<td>4.3</td>
	</tr>

	<tr>
		<td><a href="https://www.amazon.com/Waterfi-SwimActive-Waterproof-Headphones-Technology/dp/B01GW39XII/">Waterfi SwimActive</a></td>
		<td>8</td>
		<td>$39.95</td>
		<td>3.6</td>
	</tr>

	<tr>
		<td><a href="https://www.amazon.com/Avantree-Hippocampus-WATERPROOF-Underwater-Headphones/dp/B01GDRC35S/">Avantree Hippocampus</a></td>
		<td>8</td>
		<td>$16.99</td>
		<td>3.5</td>
	</tr>

	<tr>
		<td><a href="https://www.amazon.com/IEN2-BK-X-Audio-Sportwrap-Waterproof-Headphones/dp/B00AJD0H8I/">H2O Audio Surge</a></td>
		<td>8</td>
		<td>$24.99</td>
		<td>3.2</td>
	</tr>

</tbody>
</table>

<p>While looking for earbuds, I found a <a href="https://www.amazon.com/gp/product/B01243EJ7A/">waterproof case</a> that has an armband and a place to plug in earbuds. It also floats! It looks like wired earbuds will be the easiest solution, but I’m still hung up on trying to make this work with Bluetooth. For now I have a couple weeks before I go anywhere so I might as well try. That brings up a new question: what is the underwater range of Bluetooth?</p>

<h3 id="preliminary-research">Preliminary Research</h3>

<p>Bluetooth is a wireless technology standard that operates on ultra high frequency radio waves. In essence, it transmits signals through electromagnetic radiation but things get tricky when moving from air to water. Signal loss can occur through:</p>

<ul>
  <li>transmission loss from reflection and refraction at the air/water boundary</li>
  <li>propagation loss due to water’s high permittivity and electrical conductivity</li>
</ul>

<p>I think the first case shouldn’t be an issue since my headphones would already be in the water. <a href="https://open.library.ubc.ca/cIRcle/collections/ubctheses/24/items/1.0220823">Zeng</a> does a survey of underwater wireless communication in seawater and finds that scattering is low at long wavelengths like RF (radio frequency), so that leaves the second case. Water’s high permittivity reduces any electric field around it, which is problematic since electromagnetic waves propagate via disturbances in the electric (and magnetic) fields.</p>

<p><img src="/images/em-propagation.gif" alt="Visualization of EM propagation" />
<em>Image from <a href="http://www.physicsclassroom.com/mmedia/waves/em.cfm">Physics Classroom</a></em></p>

<p>Radio frequencies like Bluetooth suffer from high attenuation - its intensity decreases sharply upon contact with water molecules. <a href="http://www.hydro-international.com/content/article/underwater-electromagnetic-propagation">Rhodes</a> explains this process,</p>

<blockquote>
  <p>Loss is largely due to the effect of conduction on the electric field component. Propagating waves continually cycle energy between the electric and magnetic fields; hence conduction leads to strong attenuation of electromagnetic propagating waves.</p>
</blockquote>

<p>Saltwater has a high conductivity while freshwater has a relatively low conductivity. This means that it’ll be more challenging to engineer a hearing solution for snorkeling in the ocean compared to swimming in a lake.</p>

<p>It turns out that Bluetooth has virtually nil connectivity. <a href="http://file.scirp.org/pdf/JEMAA20110700001_18390291.pdf">Jiang and Georgakopoulos</a> show that the optimum frequency for air-to-water communication is short-wave radiowaves in the 3 to 100 MHz range. In contrast, Bluetooth is almost two orders of magnitude bigger, falling under the spectrum of microwaves at 2.4 to 2.4835 GHz. Anyone who’s had a good middle school science teacher will remember that kitchen microwaves heats food by heating the water molecules, which absorbs the microwaves.</p>

<p>Wireless frequencies that do work underwater include sonar and NFC. Apple implemented NFC chips in iPhone 6 for Apple Pay, but have banned access by third party apps. Regardless, it’s a moot point since NFC headphones are so few and not at all waterproof. If I hope to use my phone, then Bluetooth it’ll have to be.</p>

<p>For my purposes, I don’t really <em>need</em> a big range. If I am swimming with waterproof earbuds, then that’s a max depth of one foot. I am having a REALLY hard time finding out what the underwater Bluetooth range is. You’d think this would be a common question - and it is - but I guess it is so ineffective that few sought to quantify it.</p>

<h1 id="8252016">8/25/2016</h1>

<p>Today, I spent a lot of time looking at forums for R/C submarines and… I am actually kinda appalled by how much misinformation there was. Some posters would attribute the ineffectiveness of Bluetooth to the resonant frequency of water, <a href="http://www.schoolphysics.co.uk/age16-19/Wave%2520properties/Wave%20properties/text/Microwave_ovens/index.html">which is incorrect</a>. I didn’t know anything just a few days ago, but it is problematic when veteran posters propagate incorrect information to newbies. Luckily, this is the Internet, and there is always somebody rushing to prove people wrong.</p>

<h1 id="8262016">8/26/2016</h1>

<h3 id="theoretical-underwater-bluetooth-range">Theoretical Underwater Bluetooth Range</h3>

<p>I’m still hung up on this underwater Bluetooth range thing. I could make life easier for myself and just go with the wired earbuds but… no. I have about two weeks left of summer vacation and I PROMISED myself that I wouldn’t do any math, but here we go…</p>

<p>Radio frequency power is expressed in decibels. Using the formula for <a href="https://en.wikipedia.org/wiki/Free-space_path_loss">free-space path loss</a>, we can calculate the maximum distance (<script type="math/tex">d</script>) of a wireless signal as a function of path loss (<script type="math/tex">FSPL</script>), frequency (<script type="math/tex">f</script>), and the speed of light in a vacuum (<script type="math/tex">c</script>):</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align} 
\text{FSPL}_{dB} &= 10\log_{10}\left(\left( \frac{4\pi df}{c}\right)^2\right) \\
&= 20\log_{10}(d) + 20\log_{10}(f) + 20\log_{10} \left( \frac{4\pi}{c}\right) \\
&= 20\log_{10}(d) + 20\log_{10}(f) - 147.55
\end{align} %]]></script>

<p>(Actually, this isn’t a good formula, but it was my easiest starting point.) If we measure frequency in GHz instead of Hz, the equation becomes,</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
\text{FSPL}_{dB} &= 20\log_{10}(d) + 20\log_{10}(f \cdot 10^9) - 147.55 \\ 
&= 20\log_{10}(d) + 20\log_{10}(f) + 20\log_{10}(10^9) - 147.55 \\
&= 20\log_{10}(d) + 20\log_{10}(f) + 32.45
\end{align} %]]></script>

<p>Rearranging the equation above to find distance, we get:</p>

<script type="math/tex; mode=display">d = 10^{\frac{1}{20}\left(FSPL - 20\log(f) - 32.45\right)}</script>

<p>Bluetooth frequency is a known value, but what about the path loss? <a href="http://file.scirp.org/pdf/JEMAA20110700001_18390291.pdf">Jiang and Georgakopoulos</a> look at wireless signal loss in fresh water, producing the following graph of propagation loss at various depths.</p>

<p><img src="/images/propagation-loss.png" alt="Propagation loss of electromagnetic waves" /></p>

<p>A depth of 0.5 m is, in American, 1.6 feet. Bluetooth is around 2.45 GHz and I am not looking to go deep, so the solid line at 10<sup>9</sup> Hz (or 1 GHz) is what I’m interested in. It looks like the propagation loss is about 25 dB.</p>

<p>Now we can substitute values into the equation above to get the theoretical distance:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
d &= 10^{\frac{1}{20}\left(25 - 20\log(2.45) - 32.45\right)} \\
&= 0.1731 \text{ m}
\end{align} %]]></script>

<p>Thus, our theoretical range in freshwater, without accounting for transmission loss, is 17.31 centimeters. <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3355409/">Lloret et al.</a> achieved Bluetooth connectivity at average depths of 16-17 cm in a swimming pool filled with freshwater. <a href="http://bib.irb.hr/datoteka/686678.Miskovic_et_al_final_paper.pdf">Mišković et al.</a> found that under calm sea conditions, Bluetooth connection can be established at depths of fewer than 15 cm.</p>

<h1 id="8252016-1">8/25/2016</h1>

<p>Now that I have a theoretical (and empirical) distance of Bluetooth range in freshwater, it seems pretty pointless to extend the theoretical result to seawater. 15 cm is about 5.91 inches, so my head would be just under the surface of the water before I lose connectivity. This is still good for my purposes, so I’m going to go ahead with trying to modify the ActivBuds such that my phone stops using the Bluetooth microphone. That will fix the sound quality issue.</p>

<h1 id="8262016-1">8/26/2016</h1>

<h3 id="hacking-attempts">Hacking Attempts</h3>

<p>Today, I tried to hack and reprogram my Bluetooth headphones. <a href="https://www.amazon.com/gp/product/B01G8JO5F2">Senso ActivBuds</a> use Bluetooth v4.0+EDR, which stands for Enhanced Data Rate. Bluetooth devices interact with each other through “profiles,” and the profiles that Apple supports are <a href="https://support.apple.com/en-us/HT204387">here</a>. It looks like my headset might have the <a href="https://developer.bluetooth.org/TechnologyOverview/Pages/HFP.aspx">HFP profile</a>. Now the question is: do the headphones support the <a href="https://developer.bluetooth.org/TechnologyOverview/Pages/A2DP.aspx">A2DP profile</a> as with wired headphones?</p>

<p>To see which profiles are on my ActivBuds, I downloaded Bluetooth Explorer (in <a href="https://developer.apple.com/download/more/">Hardware IO Tools for Xcode</a>) and paired the ActivBuds to my laptop.</p>

<p><img src="/images/activbuds-profiles.png" alt="ActivBuds profiles" /></p>

<p>From the picture above, we see that it supports the HFP protocol (as predicted), but also <a href="https://developer.bluetooth.org/TechnologyOverview/pages/a2dp.aspx">A2DP Sink</a>, which is the profile for receiving a digital-audio stream delivered from a source. Later, I realized that music streaming happens over A2DP and you can listen to music with headphones so obviously it must have supported that profile :).</p>

<p>After some more digging, I suspect that it has a <a href="http://www.csr.com/products/csr8635">CSR635</a> chip. According to its <a href="http://www.csr.com/sites/default/files/csr8635_qfn_technical_overview.pdf">technical specs</a>, it has a transmit power of 8 dBm and receiver sensitivity of -89 dBm. <a href="http://electronicdesign.com/communications/understanding-wireless-range-calculations">ElectronicDesign</a> calculates wireless range using these two numbers but I don’t feel like recalculating anymore. The author does use the FSPL formula that I used, though.</p>

<p><img src="/images/activbuds-protocols.png" alt="ActivBuds Bluetooth protocols" /></p>

<p>From the picture above, we see the following protocols:</p>

<ul>
  <li><strong><a href="https://en.wikipedia.org/wiki/Bluetooth#AVDTP">AVDTP</a></strong>: used to stream music to stereo headsets over an L2CAP channel</li>
  <li><strong><a href="https://en.wikipedia.org/wiki/Bluetooth#RFCOMM">RFCOMM</a></strong>: generates a serial data stream</li>
  <li><strong><a href="https://en.wikipedia.org/wiki/Bluetooth#AVCTP">AVCTP</a></strong>: used by the remote control profile to transfer AV/C commands, e.g. music control buttons</li>
</ul>

<p>This is all I’ve found so far for today. I don’t know anything about engineering so it’s taken a lot of time reading through documentation and figuring out what to look for. I haven’t found a guide that tells you how profiles get put on Bluetooth “modules” (chips) – there might not even be one. I’m feeling pretty discouraged about being able to hack my ActivBuds.</p>

<h3 id="turn-of-events">Turn of Events</h3>

<p>On the bright side, waterproof case showed up today! In the photo below, you can see that it is buoyed by the inflated borders. It also has a line-in for wired earbuds and they worked pretty well. Then I wondered if the iPhone would stay in A2DP profile if I plugged in my Apple earbuds while having the Senso ActivBuds paired. The answer is no.</p>

<p><img src="/images/smarco-case.jpg" alt="Smarco Waterproof Case" /></p>

<p>But then all of a sudden, I heard my mom talking on the phone! While the ActivBuds were in! I paid attention and realized I could distinguish what she was saying. Until now, I had only been testing these things by listening to NPR Radio and TED Talks from my computer at max volume and it was impossible to make out anything.</p>

<p>This time, I was using the <a href="https://itunes.apple.com/us/app/petralex-hearing-aid/id816133779">Petralex</a> amplifier which actually gives you a hearing test first and then “fits” the amplification using several proprietary algorithms: Petralex, NAL, Berger, and POGO. I don’t know what the differences are but find that Berger and POGO perform best with higher pitches.</p>

<p>Previously, I had been using the <a href="https://itunes.apple.com/us/app/hearyounow-your-personal-sound/id569522474">HearYouNow</a> app and I couldn’t understand my mom with these. However, this app performed best with the Apple earbuds. Really interesting.</p>

<p>Maybe I might not have to do any tweaking on the ActivBuds after all. Tomorrow morning I’m going to visit my mom’s workplace and I’m going to try the ActivBuds again with the Petralex app in real-time.</p>

<h1 id="8282016">8/28/2016</h1>

<p>Yesterday night, I went to a party and tried the ActivBuds/Petralex combo. It was actually quite good. We played board games and I could more or less keep up with the overlapping chatter. It is unclear why I can understand live human speech, but not speech from my computer.</p>

<p>Today, I got in touch with a hardware engineer who specializes in embedded stuff and hardware/software interactions and he cleared up a lot of things for me. (If you’re reading this, you’re great!) We discussed <a href="http://www.bragi.com">The Dash</a> smart earphone that he owns, which are also IPX7. It has an <a href="https://support.bragi.com/hc/en-us/articles/203178271-Adjust-volume-and-audio-transparency">Audio Transparency</a> mode which amplifies the sounds of the ambient environment with a Master Volume setting. That was interesting, since it’s essentially what I’ve been trying to do. However, the Dash still uses the microphone internal to the Dash as the transparency feature’s signal doesn’t go to the phone over Bluetooth. Ultimately, the device has a lot of promise but doesn’t do as well on the connectivity and amplification side so I would not get it (and it’s $300).</p>

<p>We also discussed viable paths forward in my own project. Trying to modify the Bluetooth chip is hopeless, as the profiles are controlled by proprietary firmware. If anything, you would write a software that interfaces with the profiles that the chip supports. As a result, I am better off trying to write my own app would stream real-time audio from my iPhone’s via A2DP. Conceptually, it shouldn’t be difficult. I don’t see why streaming from a microphone to headphones is any different from streaming to a speaker and there are plenty of those apps.</p>

<p>There’s documentation in the <a href="https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6">iOS Developer Library</a> with sample source code for <a href="https://developer.apple.com/library/ios/samplecode/aurioTouch/Introduction/Intro.html">aurioTouch</a>. Also found <a href="https://audiostream.readthedocs.io/en/latest/">Audiostream</a>. Commercially, the <a href="http://www.binpress.com/app/radiotunes-sdk/596">RadioTunes SDK</a> looks pretty neat.
I’ve found a couple old threads, <a href="http://forum.unity3d.com/threads/real-time-audio-from-microphone.145686/">here</a> and <a href="http://forum.unity3d.com/threads/blow-detection-using-ios-microphone.118215/">here</a>. The best starting point looks like <a href="http://stackoverflow.com/questions/10501236/stream-media-from-iphone">this StackOverflow question</a>. <a href="https://audiob.us">Audiobus</a> can send audio from one app to another to mix music.</p>

<p>It is 12:56 AM and I’m pretty tired right now. In the afternoon I have an appointment with my audiologist and I’m going to ask what the risks of this are to my ears.</p>

<h1 id="8292016">8/29/2016</h1>

<p>I talked to my audiologist today and she didn’t seem too concerned about my project, other than telling me to avoid prolonged exposure to more than 85 dB. It shouldn’t be difficult to build in a sound check.</p>

<p>A friend recommended that I reach out to professors at R.I.T. It hosts the <a href="https://en.wikipedia.org/wiki/National_Technical_Institute_for_the_Deaf">National Technical Institute for the Deaf</a> which is the largest technological college for the deaf and hard-of-hearing so in my friend’s words, “if there’s any group that’s doing research about this stuff, it’s them.” At the very least, they would have a better idea of the latest research, could provide me with better terminology, or lead me to someone else helpful.</p>

<h1 id="8302016">8/30/2016</h1>
<p>Today I got an email that my library books were due so I went over and wore the ActivBuds instead of my hearing aid. I’m getting more accustomed to how everything sounds (really weird, btw) and I’m going to the beach this weekend to conduct tests in saltwater. As for building my own app, well, there’s one week left of summer. Realistically, I have never built an iOS app before or written in Swift so between my job, finishing up my last year of school, and job hunting, I can’t see a prototype coming out until next summer.</p>

<p>For the forseeable future, my setup will be the Senso/Petralex pairing.</p>

<h1 id="8312016">8/31/2016</h1>

<p>Went to a party today and met a Physics major. We talked about some of the physics of electromagnetic waves. Haven’t really done anything on this project for a couple days.</p>

<h1 id="12032016">12/03/2016</h1>

<p>It’s been three entire months! I have bad news, good news, and great news.</p>

<p>Bad news: I spilled water on my laptop and didn’t get a new one until yesterday. That’s why I didn’t update for so long.</p>

<p>Good news: The laptop I got is the new Macbook Pro! I have been working hard all semester and my previous laptop was from 2010, so I felt like I deserved to treat myself.</p>

<p>Great news: The final week of summer, I did several rounds of live field tests: swimming in the pool, swimming in the beach, and swimming in the ocean. In all cases, my project was FUNCTIONAL! It was an amazing time and I went back to school on this high note.</p>

<p>On a whim, I had also decided to test the <a href="https://www.amazon.com/Swimbuds-Waterproof-Headphones-Underwater-Promotion/dp/B006IF7S92/">Swimbuds</a> since they are wired and, as a bonus, IPX8-rated. (In comparison, the ActivBuds are IPX7.) Both products were tested in pool and ocean conditions.</p>

<h2 id="beach-senso-activbuds">Beach: Senso ActivBuds</h2>

<p>The first trial was an afternoon at the beach with the ActivBuds. Honestly, I had been so excited for the field test that I didn’t even think about the logistics of how I would carry the iPhone while swimming. I had it in the aforementioned waterproof case and hooked it to my bikini on my hip with a carabiner, but that dragged the fabric down. It was so awkward, not to mention the fact that the maximum range was already just 17.31 cm (6.81 in) under the best of conditions so I definitely couldn’t be chest-deep and still expect to hear.</p>

<p>In the end, I figured that at least my head should always be above water so I fastened the case to the straps around my neck (with the case hanging on my back). Since the case was buoyant, it just floated behind my head as I waded through the water.</p>

<p>The next step was calibrating the amplifier. My very patient friend told random stories as I fiddled around. Unfortunately, I can’t remember the exact settings anymore but the sound took quite a bit to get used to. At close range, the amplification was enough to improve my lip reading accuracy. Twenty meters apart, I could not understand anything but could hear my friend yelling out to me.</p>

<p>Overall, we had swam out pretty far and the ActivBuds withstood some thirty minutes of swimming.</p>

<h2 id="pool-swimbuds">Pool: Swimbuds</h2>

<p>The second trial was later that day at the pool with the Swimbuds. I hooked the case to my bikini’s neck strap and calibrated the settings with the same friend. WOW. It was a WORLD of difference! The sound quality was far clearer with the wired earbuds and I was able to comprehend my friend with almost perfect comprehension at near range (within one meter). My biggest complaints with the ActivBuds is how different things sounded. All the pitches and tones were completely “off.” With the earbuds, things sounded slightly more normal (but still different).</p>

<h2 id="ocean-senso-activbuds">Ocean: Senso ActivBuds</h2>

<p>The next day, my friend and I decided to try out snorkeling. Neither of us had done it before and this was a perfect setting to push the limits of my experiment. To recap, the ActivBuds held up with my head above water and the phone floating next to my head (yes, it’s an odd sight). With my head underwater the entire time (within the theoretical range), two questions arise.</p>

<ol>
  <li>How does the connection hold up?</li>
  <li>Will the IPX7 rating hold?</li>
</ol>

<p>Well.</p>

<p>For thirty minutes, my ear was:</p>

<p><em>“Connected… Disconnected… Connected… Disconnected…”</em></p>

<p>So that was a big flop. I ended up turning it off and just snorkeling in silence. On the second question, I’m listening to music with the ActivBuds as I write this post, so I can definitely attest to its build quality. Well worth the $33.97 current list price on Amazon.</p>

<h2 id="ocean-swimbuds">Ocean: Swimbuds</h2>

<p>We had such a blast that we went snorkeling again the following day! I brought along the Swimbuds and as expected, there were no connection issues. My head was completely submerged underwater while the phone floated along. We could not talk with the masks on so little verbal communication was needed. After a while, we found a low cave and swam inside. It was almost pitch black and I couldn’t see my friend’s face, but I heard him say, “I’m not comfortable with this.” It is exactly this kind of situation that that this whole project is meant for.</p>

<p>The field test results exceeded my expectations and I am so happy, but I also feel so silly that the solution was so simple. The semester ends in a few weeks and I want to try other conditions. In the preliminary field tests, my friend was the only audio source; there was no overlapping background chatter. How well would this perform under noisier conditions? Water parks, pool parties, any scenario that involves following overlapping conversations.</p>

<p>Last week, Jacoti Lola was <a href="http://www.prnewswire.com/news-releases/jacoti-lola-deployed-at-audacity-603580646.html">demoed at the AuDacity 2016 audiology convention</a> as a hearing assistance device that connected over Wifi technology. The reviews were promising:</p>

<blockquote>
  <p>In addition, 100% of Lola users who had hearing loss reported that Lola improved speech understanding, with a vast majority (86%) reporting that Lola helped “a lot.”</p>
</blockquote>

<p>The company has already has a track record in this space: the <a href="https://www.jacoti.com/listenapp/">Jacoti ListenApp</a> is <a href="http://www.news-medical.net/news/20150331/Jacoti-releases-first-FDA-registered-medical-device-hearing-aid-application-for-smartphones.aspx">the first FDA registered medical device</a> for hearing loss. Their product does not service my severity of hearing loss, but I want to try it out anyway.</p>


  
</div>
<div class="back"><a href="/notes.html"><i class="fa fa-chevron-left"></i> Back</a></div>

      </div>
    </div>

	  <div class="footer">
	<div class="hrline"></div>
	<div class="license">Unless otherwise stated, all original code presented on this site is licensed under the <a href="http://heiswayi.github.io/mit-license">MIT license</a>. All original photographs and text on this website are licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives</a> license.

<script>
$(window).load(function() {
	$('.grid').masonry({
		itemSelector: '.grid-item',
		columnWidth: '.grid-sizer',
		gutter: 10
	});
});
</script>


	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-83123436-1', 'auto');
	    ga('send', 'pageview');

</script>




  </body>
</html>
